(function(e,t,n){function o(t){e("#bshMenu li").removeClass("active");e("#bshOptions section").removeClass("active");e("#bshMenu li").eq(t).addClass("active");e("#bshOptions section").eq(t).addClass("active")}function u(){e("#bshLoad").fadeIn(400)}function a(){e("#bshLoad").fadeOut(400)}function f(){jQuery(".key-value-option").each(function(e){var t=e+1;jQuery(this).find("input:first").attr("id","_est_property_name_"+t);jQuery(this).find("input:last").attr("id","_est_property_value_"+t);jQuery(this).find("input:first").attr("name","_est_property_custom["+t+"][name]");jQuery(this).find("input:last").attr("name","_est_property_custom["+t+"][value]");jQuery(this).find("label:first").attr("for","_est_property_name_"+t);jQuery(this).find("label:last").attr("for","_est_property_value_"+t)})}var r=e("#page_template"),i=e("#post_ID").val(),s=e("#bshPostOptions");r.on("change",function(){u();e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"show_post_options",post_ID:i,template:r.val()},success:function(t){if(t.type==="success"){s.find(".inside").html(t.options);s.find("h3.hndle span").html(t.args.title);e("#bshPostOptions").show()}t.type==="nooptions"&&e("#bshPostOptions").hide();a()}})});e("#bshMenu li").live("click",function(){var t=e(this).index();o(t)});e(".datetimepicker").each(function(){e(this).datetimepicker({dateFormat:"d MM, yy",altField:e(this).next(),altFieldTimeOnly:!1,altFormat:"yy-mm-dd"})});e(".datetimepicker").on("change",function(){e(this).val()===""&&e(this).next().val("")});e(".checkAll").live("click",function(){e(this).parents(".option:first").find('input[type="checkbox"]').attr("checked","checked")});e(".checkNone").live("click",function(){e(this).parents(".option:first").find('input[type="checkbox"]').removeAttr("checked")});e(document).on("click","#add-key-value-option",function(){var t=e(".key-value-option:first").clone();t.find("input").val("");t.appendTo(".key-value-options");f();return!1});e(document).on("click",".remove-key-value-option",function(){var t=e(".key-value-option").length,n=e(this).parents(".key-value-option:first");t===1?n.fadeOut(function(){n.find("input").val("");n.fadeIn()}):n.fadeOut(function(){n.remove()});f();return!1})})(jQuery,this);